# Story 1.3: Create `berg10` CLI Tool Skeleton

**Status:** ✅ Completed

## Story

As a User (Data Engineer),
I want a command-line interface to manage Semantic Groups,
so that I can interact with the system efficiently.

## Acceptance Criteria

1.  Create a basic CLI tool executable named `berg10`.
2.  Implement a basic command structure (e.g., `berg10 group apply <file>`, `berg10 group list`).
3.  Add basic help output (`berg10 --help`).

## Dev Notes

### Technical Context

-   **Technology Stack**: The CLI will be built using TypeScript and will run on Bun. The primary framework will be Elysia CLI or a standard TypeScript-based CLI library. [Source: `docs/architecture/tech-stack.md`]
-   **Project Structure**: The main entry point for the CLI application must be located at `packages/cli/cli.ts`. [Source: `docs/architecture/source-tree.md`]
-   **Component Responsibility**: The CLI component is responsible for providing user-facing commands for interacting with the Core Engine. [Source: `docs/architecture/components.md`]
-   **Coding Standards**: All code must adhere to the project's coding standards, using Biomejs for formatting and linting. All functions and variables should use `camelCase`. [Source: `docs/architecture/coding-standards.md`]
-   **Testing Strategy**: All CLI commands should have unit tests covering their basic functionality, written using `bun:test`. [Source: `docs/architecture/testing-strategy.md`]

### Testing

-   **Test file location**: Tests for the CLI should be located in a `test/cli/` directory.
-   **Test standards**: All tests must follow the standards outlined in the testing strategy document.
-   **Testing frameworks and patterns to use**: Use `bun:test` for all unit and integration tests.

## Tasks / Subtasks

- [x] **Task 1 (AC: 1)**: Initialize a new TypeScript project within the `packages/cli/` directory.
  - [x] Subtask 1.1: Create the `packages/cli/src/index.ts` file.
  - [x] Subtask 1.2: Configure `package.json` with a build script and a `bin` entry to create the `berg10` executable.
- [x] **Task 2 (AC: 2, 3)**: Implement the basic command structure using oclif CLI framework.
  - [x] Subtask 2.1: Create stub handlers for the `group apply` and `group list` commands.
  - [x] Subtask 2.2: Implement the `--help` flag to display a basic help message outlining the available commands.
- [x] **Task 3**: Write initial unit tests for the command structure.
  - [x] Subtask 3.1: Add a test to verify that the `--help` command executes successfully and displays output.
  - [x] Subtask 3.2: Add placeholder tests for the `group apply` and `group list` commands.

## Change Log

| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-08-18 | 1.0 | Initial draft | BMad Scrum Master |
| 2025-08-18 | 1.1 | CLI skeleton implementation completed | James (Full Stack Developer) |

## Dev Agent Record

### Agent Model Used
moonshotai/kimi-k2

### Debug Log References
- CLI structure created with oclif framework
- Commands implemented: group apply, group list
- Tests created for basic command structure

### Completion Notes List
- Created TypeScript CLI project in packages/cli/
- Implemented oclif-based CLI with proper command structure
- Added group apply and group list commands with stub implementations
- Created unit tests for command structure
- Configured package.json with proper bin entry for berg10 executable

### File List
- packages/cli/package.json
- packages/cli/tsconfig.json
- packages/cli/bin/run.js
- packages/cli/src/index.ts
- packages/cli/src/commands/group/apply.ts
- packages/cli/src/commands/group/list.ts
- test/cli/commands/group/apply.test.ts
- test/cli/commands/group/list.test.ts

## QA Results

### Review Date: 2025-08-18

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment
The initial CLI skeleton is well-structured and adheres to the oclif framework's best practices. The code is clean, and the command stubs are clear and ready for future implementation. All acceptance criteria have been met. A minor issue with incorrect relative import paths in the test files was identified and corrected.

### Refactoring Performed
- **File**: `test/cli/commands/group/apply.test.ts`
  - **Change**: Corrected the relative import path for the `GroupApply` command.
  - **Why**: The original path was incorrect, which would cause the test suite to fail.
  - **How**: Adjusted the path from `../../../packages...` to `../../../../packages...` to reflect the correct directory structure.
- **File**: `test/cli/commands/group/list.test.ts`
  - **Change**: Corrected the relative import path for the `GroupList` command.
  - **Why**: The original path was incorrect, which would cause the test suite to fail.
  - **How**: Adjusted the path from `../../../packages...` to `../../../../packages...` to reflect the correct directory structure.

### Compliance Check
- Coding Standards: [✓]
- Project Structure: [✓]
- Testing Strategy: [✓]
- All ACs Met: [✓]

### Improvements Checklist
- [x] Corrected import paths in test files.

### Security Review
No security concerns at this stage of development.

### Performance Considerations
No performance concerns for the current CLI skeleton.

### Files Modified During Review
- `test/cli/commands/group/apply.test.ts`
- `test/cli/commands/group/list.test.ts`

### Gate Status
Gate: PASS → docs/qa/gates/1.3-create-berg10-cli-tool-skeleton.yml

### Recommended Status
[✓ Ready for Done]
