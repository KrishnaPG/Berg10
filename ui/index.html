<!DOCTYPE html>
<html lang="en" class="no-js">
<body>	
	<!-- Bootstrap Modal with iFrame to load dynamic auth content -->
	<div class="modal fade" id="authModal" tabindex="-1" role="dialog" aria-labelledby="authModalLabel">
		<div class="modal-dialog">
			<div class="modal-content">
				<!--<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="authModalLabel">Authentication</h4>
				</div>-->
				<div class="modal-body">
					<iframe src="" style="zoom:1.0" width="99.6%" height="360" frameborder="0"></iframe>
				</div>
				<!-- div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div -->
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->		

	<div id="authContainer"></div>
	<div id="fileTreeContainer"></div><!-- /container -->

	<script src="https://cdn.jsdelivr.net/g/jquery@2.1.4(jquery.js),bootstrap@3.3.5,lodash,eventemitter"></script>
	<script src="vendor/pegasus/pegasus.js"></script>
	<script src="js/bootloader.js"></script>
	<script>
		$(document).ready(function () {
			var seq = [{
					url: 'ajax/bootloader-ui.html',
					done: function () {
						var overlay = document.querySelector('div.overlay');
						var overlayNav = document.querySelector('div.overlay nav');
						bootloader.toggleOverlay(overlay);
						bootloader.pushStatusUpdate("Berg10 - Launching remote probes ...", overlayNav);
					}
				},
				{
					url: 'ajax/base.html'
				},
				{
					url: 'ajax/fileTree.html'
				},
				{
					done: function () { bootloader.toggleOverlay(document.querySelector('div.overlay')); }
				}
			];
			bootloader.loadSequence(seq);
			// load the base file
			 // bootloader.ajaxMerge('ajax/base.html', true);

			/*

			$('#authContainer').load("ajax/authHandler.html", function (response, status, xhr) {
				if (xhr.status >= 400) {
					pushStatusUpdate("Remote probe failed. Is the server running?");
				}
				else {
					pushStatusUpdate("Berg10 - acquired coordinates, preparing hyperdrive ...");
					$('#fileTreeContainer').load("ajax/fileTree.html", function (response, status, xhr) {
						toggleOverlay(overlay);  console.log("we are here");
					});
				}
			});
		*/
		});
	</script>
</body>
</html>
